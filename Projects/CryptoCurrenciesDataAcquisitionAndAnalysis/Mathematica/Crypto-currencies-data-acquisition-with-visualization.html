<h1 id="crypto-currencies-data-acquisition-with-visualization">Crypto-currencies data acquisition with visualization</h1>
<p>Anton Antonov<br />
<a href="https://github.com/antononcube/MathematicaVsR/">MathematicaVsR at GitHub</a><br />
<a href="https://mathematicaforprediction.wordpress.com">MathematicaForPrediction at WordPress</a><br />
June 2021</p>
<h2 id="introduction">Introduction</h2>
<p>In this notebook we show how to obtain crypto-currencies data from several data sources and make some basic time series visualizations. We assume the described data acquisition workflow is useful for doing more detailed (exploratory) analysis.</p>
<p>There are multiple crypto-currencies data sources, but a small proportion of them give a convenient way of extracting crypto-currencies data automatically. I found the easiest to work with to be https://finance.yahoo.com/cryptocurrencies, [YF1]. Another easy to work with Bitcoin-only data source is https://data.bitcoinity.org , [DBO1].</p>
<p>(I also looked into using https://www.coindesk.com/coindesk20. )</p>
<p><strong>Remark:</strong> The code below is made with certain ad-hoc inductive reasoning that brought meaningful results. This means the code has to be changed if the underlying data organization in [YF1, DBO1] is changed.</p>
<h2 id="yahoo-finance">Yahoo! Finance</h2>
<h3 id="getting-cryptocurrencies-symbols-and-summaries">Getting cryptocurrencies symbols and summaries</h3>
<p>In this section we get all crypto-currencies symbols and related metadata.</p>
<p>Get the data of all crypto-currencies in [YF1]:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">AbsoluteTiming</span><span class="op">[</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  lsData <span class="ex">=</span> <span class="fu">Import</span><span class="op">[</span><span class="st">&quot;https://finance.yahoo.com/cryptocurrencies&quot;</span><span class="op">,</span> <span class="st">&quot;Data&quot;</span><span class="op">]</span>; </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a> <span class="op">]</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">(*{6.18067, Null}*)</span></span></code></pre></div>
<p>Locate the data:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>pos <span class="ex">=</span> First@Position<span class="op">[</span>lsData<span class="op">,</span> <span class="op">{</span><span class="st">&quot;Symbol&quot;</span><span class="op">,</span> <span class="st">&quot;Name&quot;</span><span class="op">,</span> <span class="st">&quot;Price (Intraday)&quot;</span><span class="op">,</span> <span class="st">&quot;Change&quot;</span><span class="op">,</span> <span class="st">&quot;% Change&quot;</span><span class="op">,</span> <span class="at">___</span><span class="op">}]</span>;</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>dsCryptoCurrenciesColumnNames <span class="ex">=</span> lsData<span class="op">[[</span><span class="fu">Sequence</span> @@ pos<span class="op">]]</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">Length</span><span class="op">[</span>dsCryptoCurrenciesColumnNames<span class="op">]</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">(*{&quot;Symbol&quot;, &quot;Name&quot;, &quot;Price (Intraday)&quot;, &quot;Change&quot;, &quot;% Change&quot;, &quot;Market Cap&quot;, &quot;Volume in Currency (Since 0:00 UTC)&quot;, &quot;Volume in Currency (24Hr)&quot;, &quot;Total Volume All Currencies (24Hr)&quot;, &quot;Circulating Supply&quot;, &quot;52 Week Range&quot;, &quot;1 Day Chart&quot;}*)</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">(*12*)</span></span></code></pre></div>
<p>Get the data:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>dsCryptoCurrencies <span class="ex">=</span> lsData<span class="op">[[</span><span class="fu">Sequence</span> @@ <span class="fu">Append</span><span class="op">[</span><span class="fu">Most</span><span class="op">[</span>pos<span class="op">],</span> <span class="dv">2</span><span class="op">]]]</span>;</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Dimensions</span><span class="op">[</span>dsCryptoCurrencies<span class="op">]</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">(*{25, 10}*)</span></span></code></pre></div>
<p>Make a dataset:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>dsCryptoCurrencies <span class="ex">=</span> Dataset<span class="op">[</span>dsCryptoCurrencies<span class="op">][</span><span class="cn">All</span><span class="op">,</span> AssociationThread<span class="op">[</span>dsCryptoCurrenciesColumnNames<span class="op">[[</span><span class="dv">1</span> ;; <span class="sc">-</span><span class="dv">3</span><span class="op">]],</span> #<span class="op">]</span> &amp;<span class="op">]</span></span></code></pre></div>
<figure>
<img src="https://github.com/antononcube/MathematicaVsR/raw/master/Projects/CryptoCurrenciesDataAcquisitionAndAnalysis/Mathematica/Diagrams/027jtuv769fln.png" alt="027jtuv769fln" /><figcaption aria-hidden="true">027jtuv769fln</figcaption>
</figure>
<h3 id="get-all-time-series">Get all time series</h3>
<p>In this section we get all the crypto-currencies time series from [YF1].</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">AbsoluteTiming</span><span class="op">[</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  ccNow <span class="ex">=</span> Round@AbsoluteTime<span class="op">[</span>Date<span class="op">[]]</span> <span class="sc">-</span> <span class="fu">AbsoluteTime</span><span class="op">[{</span><span class="dv">1970</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">}]</span>; </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  aCryptoCurrenciesDataRaw <span class="ex">=</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>   Association@</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Map</span><span class="op">[</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>     # <span class="ot">-&gt;</span> ResourceFunction<span class="op">[</span><span class="st">&quot;ImportCSVToDataset&quot;</span><span class="op">][</span><span class="st">&quot;https://query1.finance.yahoo.com/v7/finance/download/&quot;</span> &lt;&gt; # &lt;&gt;<span class="st">&quot;?period1=1410825600&amp;period2=&quot;</span> &lt;&gt; <span class="fu">ToString</span><span class="op">[</span>ccNow<span class="op">]</span> &lt;&gt; <span class="st">&quot;&amp;interval=1d&amp;events=history&amp;includeAdjustedClose=true&quot;</span><span class="op">]</span> &amp;<span class="op">,</span> <span class="fu">Normal</span><span class="op">[</span>dsCryptoCurrencies<span class="op">[</span><span class="cn">All</span><span class="op">,</span> <span class="st">&quot;Symbol&quot;</span><span class="op">]]</span> </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">]</span>; </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a> <span class="op">]</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co">(*{5.98745, Null}*)</span></span></code></pre></div>
<p><strong>Remark:</strong> Note that in the code above we specified the upper limit of the time span to be the current date. (And shifted it with respect to the epoch start 1970-01-01 used by [YF1].)</p>
<p>Check we good the data with dimensions retrieval:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Dimensions</span> <span class="sc">/</span>@ aCryptoCurrenciesDataRaw</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">(*&lt;|&quot;BTC-USD&quot; -&gt; {2468, 7}, &quot;ETH-USD&quot; -&gt; {2144, 7}, &quot;USDT-USD&quot; -&gt; {2307, 7}, &quot;BNB-USD&quot; -&gt; {1426, 7}, &quot;ADA-USD&quot; -&gt; {1358, 7}, &quot;DOGE-USD&quot; -&gt; {2468, 7}, &quot;XRP-USD&quot; -&gt; {2468, 7}, &quot;USDC-USD&quot; -&gt; {986, 7}, &quot;DOT1-USD&quot; -&gt; {304, 7}, &quot;HEX-USD&quot; -&gt; {551, 7}, &quot;UNI3-USD&quot; -&gt; {81, 7},&quot;BCH-USD&quot; -&gt; {1428, 7}, &quot;LTC-USD&quot; -&gt; {2468, 7}, &quot;SOL1-USD&quot; -&gt; {436, 7}, &quot;LINK-USD&quot; -&gt; {1369, 7}, &quot;THETA-USD&quot; -&gt; {1250, 7}, &quot;MATIC-USD&quot; -&gt; {784, 7}, &quot;XLM-USD&quot; -&gt; {2468, 7}, &quot;ICP1-USD&quot; -&gt; {32, 7}, &quot;VET-USD&quot; -&gt; {1052, 7}, &quot;ETC-USD&quot; -&gt; {1792, 7}, &quot;FIL-USD&quot; -&gt; {1285, 7}, &quot;TRX-USD&quot; -&gt; {1376, 7}, &quot;XMR-USD&quot; -&gt; {2468, 7}, &quot;EOS-USD&quot; -&gt; {1450, 7}|&gt;*)</span></span></code></pre></div>
<p>Check we good the data with random sample:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">RandomSample</span><span class="op">[</span>#<span class="op">,</span> <span class="dv">6</span><span class="op">]</span> &amp; <span class="sc">/</span>@ KeyTake<span class="op">[</span>aCryptoCurrenciesDataRaw<span class="op">,</span> <span class="fu">RandomChoice</span><span class="op">[</span>Keys@aCryptoCurrenciesDataRaw<span class="op">]]</span></span></code></pre></div>
<figure>
<img src="https://github.com/antononcube/MathematicaVsR/raw/master/Projects/CryptoCurrenciesDataAcquisitionAndAnalysis/Mathematica/Diagrams/12a3tm9n7hwhw.png" alt="12a3tm9n7hwhw" /><figcaption aria-hidden="true">12a3tm9n7hwhw</figcaption>
</figure>
<p>Here we add the crypto-currencies symbols and convert date strings into date objects.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">AbsoluteTiming</span><span class="op">[</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  aCryptoCurrenciesData <span class="ex">=</span> Association@KeyValueMap<span class="op">[</span><span class="fu">Function</span><span class="op">[{</span><span class="fu">k</span><span class="op">,</span> <span class="fu">v</span><span class="op">},</span> <span class="fu">k</span> <span class="ot">-&gt;</span> <span class="fu">v</span><span class="op">[</span><span class="cn">All</span><span class="op">,</span> <span class="fu">Join</span><span class="op">[</span>&lt;<span class="sc">|</span><span class="st">&quot;Symbol&quot;</span> <span class="ot">-&gt;</span> <span class="fu">k</span><span class="op">,</span> <span class="st">&quot;DateObject&quot;</span> <span class="ot">-&gt;</span> DateObject<span class="op">[</span>#Date<span class="op">]</span><span class="sc">|</span>&gt;<span class="op">,</span> #<span class="op">]</span> &amp;<span class="op">]],</span> aCryptoCurrenciesDataRaw<span class="op">]</span>; </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a> <span class="op">]</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">(*{8.27865, Null}*)</span></span></code></pre></div>
<h3 id="summary">Summary</h3>
<p>In this section we compute the summary over <strong>all</strong> datasets:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>ResourceFunction<span class="op">[</span><span class="st">&quot;RecordsSummary&quot;</span><span class="op">][</span><span class="fu">Join</span> @@ Values<span class="op">[</span>aCryptoCurrenciesData<span class="op">],</span> <span class="st">&quot;MaxTallies&quot;</span> <span class="ot">-&gt;</span> <span class="dv">30</span><span class="op">]</span></span></code></pre></div>
<figure>
<img src="https://github.com/antononcube/MathematicaVsR/raw/master/Projects/CryptoCurrenciesDataAcquisitionAndAnalysis/Mathematica/Diagrams/05np9dmf305fp.png" alt="05np9dmf305fp" /><figcaption aria-hidden="true">05np9dmf305fp</figcaption>
</figure>
<h3 id="plots">Plots</h3>
<p>Here we plot the “Low” and “High” price time series for each crypto-currency for the last 120 days:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>nDays <span class="ex">=</span> <span class="dv">120</span>;</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Map</span><span class="op">[</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Block</span><span class="op">[{</span>dsTemp <span class="ex">=</span> #<span class="op">[</span><span class="fu">Select</span><span class="op">[</span><span class="fu">AbsoluteTime</span><span class="op">[</span>#DateObject<span class="op">]</span> &gt; <span class="fu">AbsoluteTime</span><span class="op">[</span><span class="fu">DatePlus</span><span class="op">[</span>Now<span class="op">,</span> <span class="sc">-</span>Quantity<span class="op">[</span>nDays<span class="op">,</span> <span class="st">&quot;Days&quot;</span><span class="op">]]]</span> &amp;<span class="op">]]},</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">DateListPlot</span><span class="op">[{</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">Normal</span><span class="op">[</span>dsTemp<span class="op">[</span><span class="cn">All</span><span class="op">,</span> <span class="op">{</span><span class="st">&quot;DateObject&quot;</span><span class="op">,</span> <span class="st">&quot;Low&quot;</span><span class="op">}][</span>Values<span class="op">]],</span> </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">Normal</span><span class="op">[</span>dsTemp<span class="op">[</span><span class="cn">All</span><span class="op">,</span> <span class="op">{</span><span class="st">&quot;DateObject&quot;</span><span class="op">,</span> <span class="st">&quot;High&quot;</span><span class="op">}][</span>Values<span class="op">]]},</span> </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>     PlotLegends <span class="ot">-&gt;</span> <span class="op">{</span><span class="st">&quot;Low&quot;</span><span class="op">,</span> <span class="st">&quot;High&quot;</span><span class="op">},</span> </span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>     <span class="fu">AspectRatio</span> <span class="ot">-&gt;</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">4</span><span class="op">,</span> </span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>     <span class="fu">PlotRange</span> <span class="ot">-&gt;</span> <span class="cn">All</span><span class="op">]</span> </span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>   <span class="op">]</span> &amp;<span class="op">,</span> </span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  aCryptoCurrenciesData </span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a> <span class="op">]</span></span></code></pre></div>
<figure>
<img src="https://github.com/antononcube/MathematicaVsR/raw/master/Projects/CryptoCurrenciesDataAcquisitionAndAnalysis/Mathematica/Diagrams/0xx3qb97hg2w1.png" alt="0xx3qb97hg2w1" /><figcaption aria-hidden="true">0xx3qb97hg2w1</figcaption>
</figure>
<p>Here we plot the volume time series for each crypto-currency for the last 120 days:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>nDays <span class="ex">=</span> <span class="dv">120</span>;</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Map</span><span class="op">[</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Block</span><span class="op">[{</span>dsTemp <span class="ex">=</span> #<span class="op">[</span><span class="fu">Select</span><span class="op">[</span><span class="fu">AbsoluteTime</span><span class="op">[</span>#DateObject<span class="op">]</span> &gt; <span class="fu">AbsoluteTime</span><span class="op">[</span><span class="fu">DatePlus</span><span class="op">[</span>Now<span class="op">,</span> <span class="sc">-</span>Quantity<span class="op">[</span>nDays<span class="op">,</span> <span class="st">&quot;Days&quot;</span><span class="op">]]]</span> &amp;<span class="op">]]},</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">DateListPlot</span><span class="op">[{</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">Normal</span><span class="op">[</span>dsTemp<span class="op">[</span><span class="cn">All</span><span class="op">,</span> <span class="op">{</span><span class="st">&quot;DateObject&quot;</span><span class="op">,</span> <span class="st">&quot;Volume&quot;</span><span class="op">}][</span>Values<span class="op">]]},</span> </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>     <span class="fu">PlotLabel</span> <span class="ot">-&gt;</span> <span class="st">&quot;Volume&quot;</span><span class="op">,</span> </span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>     <span class="fu">AspectRatio</span> <span class="ot">-&gt;</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">4</span><span class="op">,</span> </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>     <span class="fu">PlotRange</span> <span class="ot">-&gt;</span> <span class="cn">All</span><span class="op">]</span> </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>   <span class="op">]</span> &amp;<span class="op">,</span> </span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  aCryptoCurrenciesData </span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a> <span class="op">]</span></span></code></pre></div>
<figure>
<img src="https://github.com/antononcube/MathematicaVsR/raw/master/Projects/CryptoCurrenciesDataAcquisitionAndAnalysis/Mathematica/Diagrams/0djptbh8lhz4e.png" alt="0djptbh8lhz4e" /><figcaption aria-hidden="true">0djptbh8lhz4e</figcaption>
</figure>
<h2 id="data.bitcoinity.org">data.bitcoinity.org</h2>
<p>In this section we ingest crypto-currency data from <a href="https://data.bitcoinity.org/">data.bitcoinity.org</a>, [DBO1].</p>
<h3 id="metadata">Metadata</h3>
<p>In this sub-section we assign different metadata elements used in data.bitcoinity.org.</p>
<p>The currencies and exchanges we obtained by examining the output of:</p>
<pre><code>Import[&quot;https://data.bitcoinity.org/markets/price/30d/USD?t=l&quot;, &quot;Plaintext&quot;]</code></pre>
<h4 id="assignments">Assignments</h4>
<div class="sourceCode" id="cb13"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>lsCurrencies <span class="ex">=</span> <span class="op">{</span><span class="st">&quot;all&quot;</span><span class="op">,</span> <span class="st">&quot;AED&quot;</span><span class="op">,</span> <span class="st">&quot;ARS&quot;</span><span class="op">,</span> <span class="st">&quot;AUD&quot;</span><span class="op">,</span> <span class="st">&quot;BRL&quot;</span><span class="op">,</span> <span class="st">&quot;CAD&quot;</span><span class="op">,</span> <span class="st">&quot;CHF&quot;</span><span class="op">,</span> <span class="st">&quot;CLP&quot;</span><span class="op">,</span> <span class="st">&quot;CNY&quot;</span><span class="op">,</span> <span class="st">&quot;COP&quot;</span><span class="op">,</span> <span class="st">&quot;CZK&quot;</span><span class="op">,</span> <span class="st">&quot;DKK&quot;</span><span class="op">,</span> <span class="st">&quot;EUR&quot;</span><span class="op">,</span> <span class="st">&quot;GBP&quot;</span><span class="op">,</span> <span class="st">&quot;HKD&quot;</span><span class="op">,</span> <span class="st">&quot;HRK&quot;</span><span class="op">,</span> <span class="st">&quot;HUF&quot;</span><span class="op">,</span> <span class="st">&quot;IDR&quot;</span><span class="op">,</span> <span class="st">&quot;ILS&quot;</span><span class="op">,</span> <span class="st">&quot;INR&quot;</span><span class="op">,</span> <span class="st">&quot;IRR&quot;</span><span class="op">,</span> <span class="st">&quot;JPY&quot;</span><span class="op">,</span> <span class="st">&quot;KES&quot;</span><span class="op">,</span> <span class="st">&quot;KRW&quot;</span><span class="op">,</span> <span class="st">&quot;MXN&quot;</span><span class="op">,</span> <span class="st">&quot;MYR&quot;</span><span class="op">,</span> <span class="st">&quot;NOK&quot;</span><span class="op">,</span> <span class="st">&quot;NZD&quot;</span><span class="op">,</span> <span class="st">&quot;PHP&quot;</span><span class="op">,</span> <span class="st">&quot;PKR&quot;</span><span class="op">,</span> <span class="st">&quot;PLN&quot;</span><span class="op">,</span> <span class="st">&quot;RON&quot;</span><span class="op">,</span> <span class="st">&quot;RUB&quot;</span><span class="op">,</span> <span class="st">&quot;RUR&quot;</span><span class="op">,</span> <span class="st">&quot;SAR&quot;</span><span class="op">,</span> <span class="st">&quot;SEK&quot;</span><span class="op">,</span> <span class="st">&quot;SGD&quot;</span><span class="op">,</span> <span class="st">&quot;THB&quot;</span><span class="op">,</span> <span class="st">&quot;TRY&quot;</span><span class="op">,</span> <span class="st">&quot;UAH&quot;</span><span class="op">,</span> <span class="st">&quot;USD&quot;</span><span class="op">,</span> <span class="st">&quot;VEF&quot;</span><span class="op">,</span> <span class="st">&quot;XAU&quot;</span><span class="op">,</span> <span class="st">&quot;ZAR&quot;</span><span class="op">}</span>;</span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>lsExchanges <span class="ex">=</span> <span class="op">{</span><span class="st">&quot;all&quot;</span><span class="op">,</span> <span class="st">&quot;bit-x&quot;</span><span class="op">,</span> <span class="st">&quot;bit2c&quot;</span><span class="op">,</span> <span class="st">&quot;bitbay&quot;</span><span class="op">,</span> <span class="st">&quot;bitcoin.co.id&quot;</span><span class="op">,</span> <span class="st">&quot;bitcoincentral&quot;</span><span class="op">,</span> <span class="st">&quot;bitcoinde&quot;</span><span class="op">,</span> <span class="st">&quot;bitcoinsnorway&quot;</span><span class="op">,</span> <span class="st">&quot;bitcurex&quot;</span><span class="op">,</span> <span class="st">&quot;bitfinex&quot;</span><span class="op">,</span> <span class="st">&quot;bitflyer&quot;</span><span class="op">,</span> <span class="st">&quot;bithumb&quot;</span><span class="op">,</span> <span class="st">&quot;bitmarketpl&quot;</span><span class="op">,</span> <span class="st">&quot;bitmex&quot;</span><span class="op">,</span> <span class="st">&quot;bitquick&quot;</span><span class="op">,</span> <span class="st">&quot;bitso&quot;</span><span class="op">,</span> <span class="st">&quot;bitstamp&quot;</span><span class="op">,</span> <span class="st">&quot;btcchina&quot;</span><span class="op">,</span> <span class="st">&quot;btce&quot;</span><span class="op">,</span> <span class="st">&quot;btcmarkets&quot;</span><span class="op">,</span> <span class="st">&quot;campbx&quot;</span><span class="op">,</span> <span class="st">&quot;cex.io&quot;</span><span class="op">,</span> <span class="st">&quot;clevercoin&quot;</span><span class="op">,</span> <span class="st">&quot;coinbase&quot;</span><span class="op">,</span> <span class="st">&quot;coinfloor&quot;</span><span class="op">,</span> <span class="st">&quot;exmo&quot;</span><span class="op">,</span> <span class="st">&quot;gemini&quot;</span><span class="op">,</span> <span class="st">&quot;hitbtc&quot;</span><span class="op">,</span> <span class="st">&quot;huobi&quot;</span><span class="op">,</span> <span class="st">&quot;itbit&quot;</span><span class="op">,</span> <span class="st">&quot;korbit&quot;</span><span class="op">,</span> <span class="st">&quot;kraken&quot;</span><span class="op">,</span> <span class="st">&quot;lakebtc&quot;</span><span class="op">,</span> <span class="st">&quot;localbitcoins&quot;</span><span class="op">,</span> <span class="st">&quot;mercadobitcoin&quot;</span><span class="op">,</span> <span class="st">&quot;okcoin&quot;</span><span class="op">,</span> <span class="st">&quot;paymium&quot;</span><span class="op">,</span> <span class="st">&quot;quadrigacx&quot;</span><span class="op">,</span> <span class="st">&quot;therocktrading&quot;</span><span class="op">,</span> <span class="st">&quot;vaultoro&quot;</span><span class="op">,</span> <span class="st">&quot;wallofcoins&quot;</span><span class="op">}</span>;</span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>lsTimeSpans <span class="ex">=</span> <span class="op">{</span><span class="st">&quot;10m&quot;</span><span class="op">,</span> <span class="st">&quot;1h&quot;</span><span class="op">,</span> <span class="st">&quot;6h&quot;</span><span class="op">,</span> <span class="st">&quot;24h&quot;</span><span class="op">,</span> <span class="st">&quot;3d&quot;</span><span class="op">,</span> <span class="st">&quot;30d&quot;</span><span class="op">,</span> <span class="st">&quot;6m&quot;</span><span class="op">,</span> <span class="st">&quot;2y&quot;</span><span class="op">,</span> <span class="st">&quot;5y&quot;</span><span class="op">,</span> <span class="st">&quot;all&quot;</span><span class="op">}</span>;</span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>lsTimeUnit <span class="ex">=</span> <span class="op">{</span><span class="st">&quot;second&quot;</span><span class="op">,</span> <span class="st">&quot;minute&quot;</span><span class="op">,</span> <span class="st">&quot;hour&quot;</span><span class="op">,</span> <span class="st">&quot;day&quot;</span><span class="op">,</span> <span class="st">&quot;week&quot;</span><span class="op">,</span> <span class="st">&quot;month&quot;</span><span class="op">}</span>;</span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>aDataTypeDescriptions <span class="ex">=</span> Association@<span class="op">{</span><span class="st">&quot;price&quot;</span> <span class="ot">-&gt;</span> <span class="st">&quot;Prince&quot;</span><span class="op">,</span> <span class="st">&quot;volume&quot;</span> <span class="ot">-&gt;</span> <span class="st">&quot;Trading Volume&quot;</span><span class="op">,</span> <span class="st">&quot;rank&quot;</span> <span class="ot">-&gt;</span> <span class="st">&quot;Rank&quot;</span><span class="op">,</span> <span class="st">&quot;bidask_sum&quot;</span> <span class="ot">-&gt;</span> <span class="st">&quot;Bid/Ask Sum&quot;</span><span class="op">,</span> <span class="st">&quot;spread&quot;</span> <span class="ot">-&gt;</span> <span class="st">&quot;Bid/Ask Spread&quot;</span><span class="op">,</span> <span class="st">&quot;tradespm&quot;</span> <span class="ot">-&gt;</span> <span class="st">&quot;Trades Per Minute&quot;</span><span class="op">}</span>;</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>lsDataTypes <span class="ex">=</span> Keys<span class="op">[</span>aDataTypeDescriptions<span class="op">]</span>;</span></code></pre></div>
<h3 id="getting-btc-data">Getting BTC data</h3>
<p>Here we make a template string that for CSV data retrieval from data.bitcoinity.org:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>stDBOURL <span class="ex">=</span> StringTemplate<span class="op">[</span><span class="st">&quot;https://data.bitcoinity.org/export_data.csv?currency=`currency`&amp;data_type=`dataType`&amp;exchange=`exchange`&amp;r=`timeUnit`&amp;t=l&amp;timespan=`timeSpan`&quot;</span><span class="op">]</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co">(*TemplateObject[{&quot;https://data.bitcoinity.org/export_data.csv?currency=&quot;, TemplateSlot[&quot;currency&quot;], &quot;&amp;data_type=&quot;, TemplateSlot[&quot;dataType&quot;], &quot;&amp;exchange=&quot;, TemplateSlot[&quot;exchange&quot;], &quot;&amp;r=&quot;, TemplateSlot[&quot;timeUnit&quot;], &quot;&amp;t=l&amp;timespan=&quot;, TemplateSlot[&quot;timeSpan&quot;]}, CombinerFunction -&gt; StringJoin, InsertionFunction -&gt; TextString]*)</span></span></code></pre></div>
<p>Here is an association with default values for the string template above:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>aDBODefaultParameters <span class="ex">=</span> &lt;<span class="sc">|</span><span class="st">&quot;currency&quot;</span> <span class="ot">-&gt;</span> <span class="st">&quot;USD&quot;</span><span class="op">,</span> <span class="st">&quot;dataType&quot;</span> <span class="ot">-&gt;</span> <span class="st">&quot;price&quot;</span><span class="op">,</span> <span class="st">&quot;exchange&quot;</span> <span class="ot">-&gt;</span> <span class="st">&quot;all&quot;</span><span class="op">,</span> <span class="st">&quot;timeUnit&quot;</span> <span class="ot">-&gt;</span> <span class="st">&quot;day&quot;</span><span class="op">,</span> <span class="st">&quot;timeSpan&quot;</span> <span class="ot">-&gt;</span> <span class="st">&quot;all&quot;</span><span class="sc">|</span>&gt;;</span></code></pre></div>
<p><strong>Remark:</strong> The metadata assigned above is used to form valid queries for the query string template.</p>
<p><strong>Remark:</strong> Not all combinations of parameters are “fully respected” by data.bitcoinity.org. For example, if a data request is with time granularity that is too fine over a large time span, then the returned data is with coarser granularity.</p>
<h4 id="price-for-a-particular-currency-and-exchange-pair">Price for a particular currency and exchange pair</h4>
<p>Here we retrieve data by overwriting the parameters for currency, time unit, time span, and exchange:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>dsBTCPriceData <span class="ex">=</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  ResourceFunction<span class="op">[</span><span class="st">&quot;ImportCSVToDataset&quot;</span><span class="op">][</span>stDBOURL<span class="op">[</span><span class="fu">Join</span><span class="op">[</span>aDBODefaultParameters<span class="op">,</span> &lt;<span class="sc">|</span><span class="st">&quot;currency&quot;</span> <span class="ot">-&gt;</span> <span class="st">&quot;EUR&quot;</span><span class="op">,</span> <span class="st">&quot;timeUnit&quot;</span> <span class="ot">-&gt;</span> <span class="st">&quot;hour&quot;</span><span class="op">,</span> <span class="st">&quot;timeSpan&quot;</span> <span class="ot">-&gt;</span> <span class="st">&quot;7d&quot;</span><span class="op">,</span> <span class="st">&quot;exchange&quot;</span> <span class="ot">-&gt;</span> <span class="st">&quot;coinbase&quot;</span><span class="sc">|</span>&gt;<span class="op">]]]</span></span></code></pre></div>
<figure>
<img src="https://github.com/antononcube/MathematicaVsR/raw/master/Projects/CryptoCurrenciesDataAcquisitionAndAnalysis/Mathematica/Diagrams/0xcsh7gmkf1q5.png" alt="0xcsh7gmkf1q5" /><figcaption aria-hidden="true">0xcsh7gmkf1q5</figcaption>
</figure>
<p>Here is a summary:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>ResourceFunction<span class="op">[</span><span class="st">&quot;RecordsSummary&quot;</span><span class="op">][</span>dsBTCPriceData<span class="op">]</span></span></code></pre></div>
<figure>
<img src="https://github.com/antononcube/MathematicaVsR/raw/master/Projects/CryptoCurrenciesDataAcquisitionAndAnalysis/Mathematica/Diagrams/0rzy81vbf5o23.png" alt="0rzy81vbf5o23" /><figcaption aria-hidden="true">0rzy81vbf5o23</figcaption>
</figure>
<h4 id="volume-data">Volume data</h4>
<p>Here we retrieve data by overwriting the parameters for data type, time unit, time span, and exchange:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>dsBTCVolumeData <span class="ex">=</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  ResourceFunction<span class="op">[</span><span class="st">&quot;ImportCSVToDataset&quot;</span><span class="op">][</span>stDBOURL<span class="op">[</span><span class="fu">Join</span><span class="op">[</span>aDBODefaultParameters<span class="op">,</span> &lt;<span class="sc">|</span><span class="st">&quot;dataType&quot;</span> <span class="ot">-&gt;</span> Volume<span class="op">,</span> <span class="st">&quot;timeUnit&quot;</span> <span class="ot">-&gt;</span> <span class="st">&quot;day&quot;</span><span class="op">,</span> <span class="st">&quot;timeSpan&quot;</span> <span class="ot">-&gt;</span> <span class="st">&quot;30d&quot;</span><span class="op">,</span> <span class="st">&quot;exchange&quot;</span> <span class="ot">-&gt;</span> <span class="st">&quot;all&quot;</span><span class="sc">|</span>&gt;<span class="op">]]]</span></span></code></pre></div>
<figure>
<img src="https://github.com/antononcube/MathematicaVsR/raw/master/Projects/CryptoCurrenciesDataAcquisitionAndAnalysis/Mathematica/Diagrams/1scvwhiftq8m2.png" alt="1scvwhiftq8m2" /><figcaption aria-hidden="true">1scvwhiftq8m2</figcaption>
</figure>
<p>Here is a summary:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>ResourceFunction<span class="op">[</span><span class="st">&quot;RecordsSummary&quot;</span><span class="op">][</span>dsBTCVolumeData<span class="op">]</span></span></code></pre></div>
<figure>
<img src="https://github.com/antononcube/MathematicaVsR/raw/master/Projects/CryptoCurrenciesDataAcquisitionAndAnalysis/Mathematica/Diagrams/1bmbadd8up36a.png" alt="1bmbadd8up36a" /><figcaption aria-hidden="true">1bmbadd8up36a</figcaption>
</figure>
<h3 id="plots-1">Plots</h3>
<h4 id="price-data">Price data</h4>
<p>Here we extract the non-time columns in the tabular price data obtained above and plot the corresponding time series:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">DateListPlot</span><span class="op">[</span>Association<span class="op">[</span># <span class="ot">-&gt;</span> <span class="fu">Normal</span><span class="op">[</span>dsBTCPriceData<span class="op">[</span><span class="cn">All</span><span class="op">,</span> <span class="op">{</span><span class="st">&quot;Time&quot;</span><span class="op">,</span> #<span class="op">}][</span>Values<span class="op">]]</span> &amp; <span class="sc">/</span>@Rest<span class="op">[</span><span class="fu">Normal</span><span class="op">[</span>Keys<span class="op">[</span>dsBTCPriceData<span class="op">[[</span><span class="dv">1</span><span class="op">]]]]]],</span> <span class="fu">AspectRatio</span> <span class="ot">-&gt;</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">4</span><span class="op">,</span> <span class="fu">ImageSize</span> <span class="ot">-&gt;</span> <span class="fu">Large</span><span class="op">]</span></span></code></pre></div>
<figure>
<img src="https://github.com/antononcube/MathematicaVsR/raw/master/Projects/CryptoCurrenciesDataAcquisitionAndAnalysis/Mathematica/Diagrams/136hrgyroy246.png" alt="136hrgyroy246" /><figcaption aria-hidden="true">136hrgyroy246</figcaption>
</figure>
<h4 id="volume-data-1">Volume data</h4>
<p>Here we extract the non-time columns (corresponding to exchanges) in the tabular volume data obtained above and plot the corresponding time series:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">DateListPlot</span><span class="op">[</span>Association<span class="op">[</span># <span class="ot">-&gt;</span> <span class="fu">Normal</span><span class="op">[</span>dsBTCVolumeData<span class="op">[</span><span class="cn">All</span><span class="op">,</span> <span class="op">{</span><span class="st">&quot;Time&quot;</span><span class="op">,</span> #<span class="op">}][</span>Values<span class="op">]]</span> &amp; <span class="sc">/</span>@ <span class="fu">Rest</span><span class="op">[</span><span class="fu">Normal</span><span class="op">[</span>Keys<span class="op">[</span>dsBTCVolumeData<span class="op">[[</span><span class="dv">1</span><span class="op">]]]]]],</span> <span class="fu">PlotRange</span> <span class="ot">-&gt;</span> <span class="cn">All</span><span class="op">,</span> <span class="fu">AspectRatio</span> <span class="ot">-&gt;</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">4</span><span class="op">,</span> <span class="fu">ImageSize</span> <span class="ot">-&gt;</span> <span class="fu">Large</span><span class="op">]</span></span></code></pre></div>
<figure>
<img src="https://github.com/antononcube/MathematicaVsR/raw/master/Projects/CryptoCurrenciesDataAcquisitionAndAnalysis/Mathematica/Diagrams/1tz1hw81b2930.png" alt="1tz1hw81b2930" /><figcaption aria-hidden="true">1tz1hw81b2930</figcaption>
</figure>
<h2 id="references">References</h2>
<p>[DBO1] https://data.bitcoinity.org.</p>
<p>[WK1] Wikipedia entry, <a href="https://en.wikipedia.org/wiki/Cryptocurrency">Cryptocurrency</a>.</p>
<p>[YF1] Yahoo! Finance, <a href="https://finance.yahoo.com/cryptocurrencies">Cryptocurrencies</a>.</p>
